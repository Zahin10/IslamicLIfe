<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Islamic Life</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <header>
        <nav>
            <div class="logo">Islamic Life</div>
            <ul>
                <li><a href="/">Home</a></li>
                <li><a href="/login" id="loginLink">Login</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <section class="hero">
            <h1>Welcome to Islamic Life</h1>
            <p>Your journey to a meaningful spiritual life starts here</p>
        </section>
        <section class="features">
            <div class="feature">
                <h2>Prayer Times</h2>
                <p>Get accurate prayer times for your location</p>
            </div>
            <div class="feature">
                <h2>Quran</h2>
                <p>Read and listen to the Holy Quran</p>
            </div>
            <div class="feature">
                <h2>Community</h2>
                <p>Connect with other Muslims in your area</p>
            </div>
        </section>
    </main>
    <footer>
        <p>&copy; 2024 Islamic Life. All rights reserved.</p>
    </footer>

    <!-- Firebase App & Authentication -->
    <script type="module">
        // Import Firebase SDKs
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js";

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyByXLuKbqXrSn_VqWq1HLFMyeGs5lWmMg8",
            authDomain: "islam-73962.firebaseapp.com",
            projectId: "islam-73962",
            storageBucket: "islam-73962.appspot.com",
            messagingSenderId: "597800622089",
            appId: "1:597800622089:web:0fd2a0c18c57fe9c4840d8",
            measurementId: "G-2RZ376VDWL"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // Login form logic
        document.getElementById('loginLink').addEventListener('click', async (e) => {
            e.preventDefault();
            const email = prompt('Enter your email:');
            const password = prompt('Enter your password:');
            
            try {
                const userCredential = await signInWithEmailAndPassword(auth, email, password);
                const idToken = await userCredential.user.getIdToken();

                const response = await fetch('/sessionLogin', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ idToken }),
                });

                if (response.ok) {
                    window.location.href = '/dashboard';
                } else {
                    alert('Failed to login.');
                }
            } catch (error) {
                console.error('Login error:', error);
                alert('Invalid credentials, please try again.');
            }
        });
    </script>
</body>
</html>
